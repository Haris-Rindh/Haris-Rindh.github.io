<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Read a preview of the book and download it for free. Find books on self-help, education, and more.">
    <meta name="keywords" content="books, free books, book preview, download books, self-help books, education books">
    <meta name="author" content="Harinova Digital">
    <meta property="og:title" content="Book Preview">
    <meta property="og:description" content="Read and download books for free.">
    <meta property="og:image" content="default-book-image.jpg">
    <meta property="og:url" content="https://yourwebsite.com/book-preview.html">
    <meta name="twitter:card" content="summary_large_image">
    <title>Book Preview</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <header>
        <h1>Book Preview</h1>
        <a href="index.html">Back to Home</a>
    </header>
    
    <main id="book-preview-container">
        <div id="book-info">
            <img id="book-cover" src="" alt="Book Cover">
            <h2 id="book-title"></h2>
            <p id="book-author"></p>
            <div class="buttons">
                <a id="download-link" href="#" target="_blank" class="button">Download</a>
            </div>
        </div>
        <iframe id="book-preview" src="" frameborder="0"></iframe>
    </main>
    
    <script>
        // Get book ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const bookId = parseInt(urlParams.get('bookId')); // ✅ Convert to integer

        async function fetchBooks() {
            try {
                const response = await fetch('books.json'); // ✅ Ensure correct path
                if (!response.ok) throw new Error('Failed to load books.json');
                return await response.json();
            } catch (error) {
                console.error('Error loading books:', error);
                document.getElementById('book-preview-container').innerHTML = '<p>Failed to load books.</p>';
            }
        }

        async function displayBookPreview() {
            const books = await fetchBooks();
            if (!books) return;

            const book = books.find(b => b.id === bookId); // ✅ Use `===` for number comparison
            if (!book) {
                document.getElementById('book-preview-container').innerHTML = '<p>Book not found.</p>';
                return;
            }

            document.getElementById('book-cover').src = book.cover;
            document.getElementById('book-title').textContent = book.title;
            document.getElementById('book-author').textContent = `by ${book.author}`;
            document.getElementById('download-link').href = book.downloadLink;
            document.getElementById('book-preview').src = book.embedLink;
        }

        document.addEventListener('DOMContentLoaded', displayBookPreview);
    </script>
    <script src="script.js"></script>
</body>
</html>
